# 简易知乎一键发布工具

该项目将原有应用中最核心的功能拆分为两个独立模块：

1. `editor/`：本地静态网页，提供 TinyMCE 富文本编辑器，可生成任务并通过 `postMessage` 与浏览器扩展通信。
2. `extension/`：Chrome 扩展（开发者模式加载），在知乎写作页内接收任务并自动填充标题、正文内容。

本项目面向希望使用最简架构（静态网页 + 浏览器扩展）的团队或个人，便于快速部署和定制。

---

## 目录结构

```text
simple-publisher/
├─ editor/            # 静态页面源代码
│  ├─ index.html      # 主编辑页面
│  └─ assets/         # 存放本地图片、样式或脚本（如有需要）
├─ extension/         # Chrome 扩展源码
│  ├─ manifest.json   # 扩展清单文件
│  └─ content-zhihu.js# 知乎专栏自动填充脚本
└─ README.md          # 项目说明
```

---

## 使用步骤

### 1. 准备静态编辑页面

- 打开 `editor/index.html`，在浏览器直接访问即可。
- 页面提供标题输入框与 TinyMCE 富文本编辑器，并且内置示例脚本：
  - 编辑完成后点击 "一键发布到知乎" 按钮，会通过 `window.open` 打开知乎写作页。
  - 页面会向知乎标签页发送布署任务，期望扩展监听并处理。

### 2. 加载 Chrome 扩展

1. 打开 Chrome 浏览器，访问 `chrome://extensions/`。
2. 右上角打开 "开发者模式"。
3. 点击 "加载已解压的扩展程序"，选择 `extension/` 目录。
4. 确保扩展已启用。

### 3. 运行流程

1. 在浏览器中打开 `editor/index.html`。
2. 填写文章标题与正文内容。
3. 勾选是否自动发布（可选）。
4. 点击 "一键发布到知乎"；页面会打开知乎写作页。
5. 扩展脚本会在知乎写作页内接收任务、自动填充标题与正文，并根据配置自动或手动完成发布。

---

## 自定义说明

- 如需允许更多来源调用扩展，可在 `extension/content-zhihu.js` 中修改 `ORIGINS` 白名单。
- 若知乎页面的 DOM 结构变更，可调整脚本中的查找逻辑与填充策略。
- `editor/index.html` 使用 TinyMCE CDN，如需离线部署，可自行下载 TinyMCE 并调整引用路径。

---

## 后续规划建议

- 为扩展增加后台脚本与消息总线，支持多个平台或更多操作指令。
- 在编辑器中保存草稿、导出 HTML/Markdown，以提升实用性。
- 添加自动构建脚本（如 Vite/Parcel）整合打包静态资源（视需求而定）。

---

如需在原项目中清理旧架构，可以参考以下步骤：

1. 将 `editor/index.html` 与 `extension/` 目录复制到新仓库。
2. 移除 Electron / Node 相关依赖与配置文件。
3. 保留必要的文档（如本 README）并补充新的使用说明。

祝使用愉快！
